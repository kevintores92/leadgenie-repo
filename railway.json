{
  "$schema": "https://railway.app/railway.schema.json",
  "services": {
    "backend-api": {
      "source": {
        "repo": "https://github.com/kevintores92/leadgenie-repo.git"
      },
      "rootDirectory": "my-saas-platform/apps/backend-api",
      "buildCommand": "npm install",
      "startCommand": "npx prisma migrate deploy && npx prisma db seed && node src/server.js",
      "variables": {
        "PORT": "5000",
        "NODE_ENV": "production",
        "DEV_AUTH_EMAIL": "admin@example.com",
        "DEV_AUTH_PASSWORD": "supersecret",
        "TWILIO_ACCOUNT_SID": "${{ secrets.TWILIO_ACCOUNT_SID }}",
        "TWILIO_AUTH_TOKEN": "${{ secrets.TWILIO_AUTH_TOKEN }}",
        "TWILIO_TWIML_APP_SID": "${{ secrets.TWILIO_TWIML_APP_SID }}",
        "TWILIO_FROM": "+16367472940",
        "WEBHOOK_SUFFIX": "default",
        "FAKE_TWILIO": "0",
        "DATABASE_URL": "${{ secrets.DATABASE_URL }}",
        "REDIS_URL": "${{ secrets.REDIS_URL }}"
      }
    },
    "worker-services": {
      "source": {
        "repo": "https://github.com/kevintores92/leadgenie-repo.git"
      },
      "rootDirectory": "my-saas-platform/apps/worker-services",
      "buildCommand": "npm ci",
      "startCommand": "npx prisma generate && node src/campaignSender.js",
      "variables": {
        "NODE_ENV": "production",
        "TWILIO_ACCOUNT_SID": "${{ secrets.TWILIO_ACCOUNT_SID }}",
        "TWILIO_AUTH_TOKEN": "${{ secrets.TWILIO_AUTH_TOKEN }}",
        "TWILIO_TWIML_APP_SID": "${{ secrets.TWILIO_TWIML_APP_SID }}",
        "TWILIO_FROM": "+16367472940",
        "FAKE_TWILIO": "0",
        "DATABASE_URL": "${{ secrets.DATABASE_URL }}",
        "REDIS_URL": "${{ secrets.REDIS_URL }}",
        "TEMPLATES_CSV": "../../Temporary_Templates.csv"
      }
    },
    "frontend": {
      "source": {
        "repo": "https://github.com/kevintores92/leadgenie-repo.git"
      },
      "rootDirectory": "my-saas-platform/apps/Dashboard-Dark",
      "buildCommand": "npm install && npm run build",
      "startCommand": "npm run preview",
      "variables": {
        "NODE_ENV": "production",
        "VITE_DEV_AUTH_EMAIL": "admin@example.com",
        "VITE_DEV_AUTH_PASSWORD": "supersecret",
        "VITE_API_URL": "${{ services.backend.url }}"
      }
    },
    "postgres": {
      "image": "postgres:16",
      "variables": {
        "POSTGRES_DB": "leadgenie",
        "POSTGRES_USER": "postgres",
        "POSTGRES_PASSWORD": "${{ secrets.POSTGRES_PASSWORD }}"
      }
    },
    "redis": {
      "image": "redis:7-alpine",
      "variables": {}
    }
  },
  "variables": {
    "shared": {
      "DATABASE_URL": "postgresql://${{ secrets.POSTGRES_USER }}:${{ secrets.POSTGRES_PASSWORD }}@${{ services.postgres.host }}:5432/leadgenie",
      "REDIS_URL": "redis://${{ services.redis.host }}:6379"
    }
  }
}
